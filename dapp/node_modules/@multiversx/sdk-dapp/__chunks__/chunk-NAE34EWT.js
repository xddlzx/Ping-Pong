import{a as L}from"./chunk-VWIO5HEC.js";import{a as I}from"./chunk-VDGGNMS4.js";import{a as S}from"./chunk-Z3QGFJXC.js";import{d as C}from"./chunk-EPS6HRIQ.js";import{b as y}from"./chunk-KRNFIMQV.js";import{a as v,d as J}from"./chunk-F2BOSVKG.js";import{a as w,b as U,c as D}from"./chunk-TGDCWKZH.js";import{c as z}from"./chunk-UORIA4VW.js";import{a as k}from"./chunk-7XYHQ72T.js";import{a as i,b as x}from"./chunk-WISLI42M.js";import{a,g as _}from"./chunk-W7SO52DM.js";import{a as T,c as N}from"./chunk-CK75LBHF.js";import{a as c,b as M}from"./chunk-RY7YMBVF.js";import{a as P}from"./chunk-OWBHRN3S.js";import{a as B}from"./chunk-COFGP7BF.js";import{j as b,m as h}from"./chunk-HBP5N4FR.js";h();M();N();J();B();D();x();_();z();var A=({callbackUrl:t,onRedirect:r})=>{typeof r=="function"?r(t):t&&U({url:t})},K=t=>{let r=i.local.getItem(a.logoutEvent),{data:n}=r?JSON.parse(r):{data:t};t===n&&(i.local.setItem({key:a.logoutEvent,data:t,expires:0}),i.local.removeItem(a.logoutEvent))},j=500;function io(so,lo){return b(this,arguments,function*(t,r,n=Boolean(S()),m={shouldBroadcastLogoutAcrossTabs:!0,hasConsentPopup:!1}){var d,f,p;let s=yield I(),o=C(),g=y(o),l=g==="wallet",u=((d=o==null?void 0:o.isInitialized)==null?void 0:d.call(o))===!0;if(n&&(o==null?void 0:o.relogin)!=null)return o.relogin();s&&m.shouldBroadcastLogoutAcrossTabs&&K(s);let e=k(t),E=P(),{pathname:W,origin:R}=new URL(decodeURIComponent(e));if((L(E.pathname,W)||l&&u||((f=c)==null?void 0:f.opener)&&R===((p=c)==null?void 0:p.origin))&&w(),!s&&!u)return A({callbackUrl:e,onRedirect:r});try{if(v.dispatch(T()),l)return setTimeout(()=>{o.logout({callbackUrl:e})},j);m.hasConsentPopup&&g==="crossWindow"&&o.setShouldShowConsentPopup(!0),yield o.logout({callbackUrl:e})}catch(O){console.error("Logging out error:",O)}finally{l||A({callbackUrl:e,onRedirect:r})}})}export{io as a};
//# sourceMappingURL=chunk-NAE34EWT.js.map
