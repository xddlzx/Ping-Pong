import{a as b}from"./chunk-OIR3AGIW.js";import{a as C}from"./chunk-4GJGBARS.js";import{a as d}from"./chunk-I47ZRB3J.js";import{a as R}from"./chunk-7UIADIJ3.js";import{a as k}from"./chunk-UY7HSDCC.js";import{g as D}from"./chunk-2CBBH2VA.js";import{a as h,d as G}from"./chunk-F2BOSVKG.js";import{a as P}from"./chunk-OC3TXL2V.js";import{b as p}from"./chunk-ATR67GE7.js";import{j as v,k as B,l as H}from"./chunk-HNDDVE4V.js";import{p as x}from"./chunk-EOZJRV5E.js";import{j as m,m as S}from"./chunk-HBP5N4FR.js";S();P();G();x();D();var u={},g=[];function F({serverTransaction:t,sessionId:s,customTransactionInformation:r,shouldRefreshBalance:l,isSequential:o}){let{hash:e,status:a,inTransit:n,results:w,invalidTransaction:c,hasStatusChanged:i}=t;try{if(g.includes(e))return;if(u[e]>30){d(s);return}if(c&&!o||v(a)){u[e]=u[e]?u[e]+1:1;return}if(o&&!a){h.dispatch(p({sessionId:s,status:a,transactionHash:e,inTransit:n,serverTransaction:t}));return}i&&(B(a)&&(r==null?void 0:r.completedTransactionsDelay)!=null?(g.push(e),setTimeout(()=>h.dispatch(p({sessionId:s,status:"success",transactionHash:e,inTransit:n,serverTransaction:t})),r==null?void 0:r.completedTransactionsDelay)):h.dispatch(p({sessionId:s,status:a,transactionHash:e,inTransit:n,serverTransaction:t}))),l||R(),H(a)&&C({sessionId:s,hash:e,results:w})}catch(y){console.error(y),d(s)}}function W(w){return m(this,arguments,function*({sessionId:t,transactionBatch:{transactions:s,customTransactionInformation:r},getTransactionsByHash:l=k,shouldRefreshBalance:o,isSequential:e,onSuccess:a,onFail:n}){try{if(s==null)return;let c=b(s,g),i=yield l(c);for(let T of i)F({serverTransaction:T,sessionId:t,customTransactionInformation:r,shouldRefreshBalance:o,isSequential:e});if(i.every(T=>T.status!=="pending")&&!(r!=null&&r.grouping)){if(i.every(f=>f.status==="success"))return a==null?void 0:a(t);if(i.some(f=>f.status==="fail"))return n==null?void 0:n(t)}}catch(c){console.error(c)}})}export{W as a};
//# sourceMappingURL=chunk-Y7D5ALKM.js.map
