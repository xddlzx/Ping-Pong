import{a as h}from"./chunk-JCAUBGCB.js";import{a as b}from"./chunk-42NHSQZS.js";import{a as U}from"./chunk-EQ2NFAP2.js";import{c as W}from"./chunk-KRNFIMQV.js";import{c as I,d as S}from"./chunk-4NFNYA6L.js";import{s as j}from"./chunk-2CBBH2VA.js";import{i as k}from"./chunk-S55DZJQR.js";import{a as H}from"./chunk-OC3TXL2V.js";import{e as T}from"./chunk-OULOPE3W.js";import{g as w}from"./chunk-P3KWCR7B.js";import{h as u,j as z}from"./chunk-7YHU2LQD.js";import{a as y,b as B}from"./chunk-OWBHRN3S.js";import{a as L,b as m,j as d,m as f}from"./chunk-HBP5N4FR.js";f();z();import{useState as v}from"react";j();H();B();var ae=({callbackRoute:i,token:P,nativeAuth:r,redirectDelayMilliseconds:R=100,customWalletAddress:o})=>{let[s,x]=v(""),[D,a]=v(!1),N=S(k),c=I(),l=b(),O=Boolean(r),g=U(r),e=P;function C(){return d(this,null,function*(){if(l)throw new Error(u);c(T(o));try{a(!0);let n=W(o!=null?o:N.walletAddress),p=new Date,E=p.setMinutes(p.getMinutes()+3)/1e3,M={data:{},expires:E};if(O&&!e&&(e=yield g.getNativeAuthLoginToken(),!e)){console.warn("Login cancelled.");return}e&&g.setLoginToken(e);let{origin:A}=y(),F=window!=null&&window.location?`${A}${i}`:`${i}`;new URLSearchParams(document==null?void 0:document.location.search).get("address")||c(w(M));let G=h(F),_=encodeURIComponent(G),$=m(L({callbackUrl:_},e&&{token:e}),{redirectDelayMilliseconds:R});yield n.login($)}catch(n){console.error(n),x("error logging in"+n.message)}finally{a(!1)}})}let t=Boolean(s);return[C,{error:s,loginFailed:t,isLoading:D&&!t,isLoggedIn:l&&!t}]};export{ae as a};
//# sourceMappingURL=chunk-MZOQ6TU5.js.map
