import{a as T}from"./chunk-3VOPLXJ4.js";import{a as I}from"./chunk-PEPX6GK6.js";import{a as b}from"./chunk-B7ZRV6BR.js";import{a as S}from"./chunk-Y7QAA5B4.js";import{a as v}from"./chunk-GOSQZVXA.js";import{a as h}from"./chunk-VH5B3W6C.js";import{b as g}from"./chunk-3SGZP5CP.js";import{f}from"./chunk-ZBVPEAPP.js";import{a as d}from"./chunk-JDG3N5JQ.js";import{e as m,g as F}from"./chunk-MDZJ7LZR.js";import{j as l,m as u}from"./chunk-HBP5N4FR.js";u();F();import{useCallback as N,useEffect as O,useRef as P}from"react";var z=t=>{let{batchTransactionsArray:o}=I(),k=d(),i=v(),n=P(null),A=g.status==="completed",r=t==null?void 0:t.onSuccess,s=t==null?void 0:t.onFail,a=N(()=>l(void 0,null,function*(){for(let{batchId:c,transactions:B}of o){let e=S(c);if(!e||!T(e,6e5))continue;yield i({sessionId:e.toString(),shouldRefreshBalance:!0,dropUnprocessedTransactions:!0});let C=h({transactions:B}),{isPending:E,isSuccessful:R,isFailed:y}=b({transactions:C});E||(f(c),R&&(r==null||r(e.toString())),y&&(s==null||s(e.toString(),"Error processing batch transactions. Status: failed")))}}),[o,i,r,s]);O(()=>{if(A){n.current&&clearInterval(n.current);return}if(!n.current)return n.current=setInterval(()=>{a()},k),()=>{n.current&&clearInterval(n.current)}},[a])};export{z as a};
//# sourceMappingURL=chunk-6KWONDXK.js.map
