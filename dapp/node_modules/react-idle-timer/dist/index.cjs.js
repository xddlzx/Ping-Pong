var lt=Object.create,ie=Object.defineProperty;var mt=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var pt=Object.getPrototypeOf,ft=Object.prototype.hasOwnProperty;var Ae=t=>ie(t,"__esModule",{value:!0});var Tt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),vt=(t,e)=>{for(var n in e)ie(t,n,{get:e[n],enumerable:!0})},ht=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of dt(e))!ft.call(t,r)&&r!=="default"&&ie(t,r,{get:()=>e[r],enumerable:!(n=mt(e,r))||n.enumerable});return t},se=t=>ht(Ae(ie(t!=null?lt(pt(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Ce=Tt((ae,De)=>{(function(t,e){typeof ae=="object"&&typeof De!="undefined"?e(ae):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.fastUniqueNumbers={}))})(ae,function(t){"use strict";var e=function(l){return function(f){var p=l(f);return f.add(p),p}},n=function(l){return function(f,p){return l.set(f,p),p}},r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,m=536870912,T=m*2,F=function(l,f){return function(p){var M=f.get(p),y=M===void 0?p.size:M<T?M+1:0;if(!p.has(y))return l(p,y);if(p.size<m){for(;p.has(y);)y=Math.floor(Math.random()*T);return l(p,y)}if(p.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;p.has(y);)y=Math.floor(Math.random()*r);return l(p,y)}},j=new WeakMap,Z=n(j),u=F(Z,j),o=e(u);t.addUniqueNumber=o,t.generateUniqueNumber=u,Object.defineProperty(t,"__esModule",{value:!0})})});Ae(exports);vt(exports,{IdleTimerConsumer:()=>et,IdleTimerContext:()=>Q,IdleTimerProvider:()=>Ze,createMocks:()=>je,useIdleTimer:()=>G,useIdleTimerContext:()=>tt,withIdleTimer:()=>Oe,workerTimers:()=>Ve});function Oe(t){return function(n){let r={...n};!r.onPrompt&&t.prototype.onPrompt&&(r.onPrompt=()=>{t.prototype.onPrompt()}),!r.onIdle&&t.prototype.onIdle&&(r.onIdle=()=>{t.prototype.onIdle()}),!r.onActive&&t.prototype.onActive&&(r.onActive=T=>{t.prototype.onActive(T)}),!r.onAction&&t.prototype.onAction&&(r.onAction=T=>{t.prototype.onAction(T)});let m=G(r);return React.createElement(t,{...n,...m})}}var i=se(require("react"));var Y=se(Ce());var Ne=t=>t.method!==void 0&&t.method==="call";var _e=t=>t.error===null&&typeof t.id=="number";var Ue=t=>{let e=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),r=new Map,m=new Worker(t);return m.addEventListener("message",({data:u})=>{if(Ne(u)){let{params:{timerId:o,timerType:c}}=u;if(c==="interval"){let l=e.get(o);if(typeof l=="number"){let f=r.get(l);if(f===void 0||f.timerId!==o||f.timerType!==c)throw new Error("The timer is in an undefined state.")}else if(typeof l!="undefined")l();else throw new Error("The timer is in an undefined state.")}else if(c==="timeout"){let l=n.get(o);if(typeof l=="number"){let f=r.get(l);if(f===void 0||f.timerId!==o||f.timerType!==c)throw new Error("The timer is in an undefined state.")}else if(typeof l!="undefined")l(),n.delete(o);else throw new Error("The timer is in an undefined state.")}}else if(_e(u)){let{id:o}=u,c=r.get(o);if(c===void 0)throw new Error("The timer is in an undefined state.");let{timerId:l,timerType:f}=c;r.delete(o),f==="interval"?e.delete(l):n.delete(l)}else{let{error:{message:o}}=u;throw new Error(o)}}),{clearInterval:u=>{let o=(0,Y.generateUniqueNumber)(r);r.set(o,{timerId:u,timerType:"interval"}),e.set(u,o),m.postMessage({id:o,method:"clear",params:{timerId:u,timerType:"interval"}})},clearTimeout:u=>{let o=(0,Y.generateUniqueNumber)(r);r.set(o,{timerId:u,timerType:"timeout"}),n.set(u,o),m.postMessage({id:o,method:"clear",params:{timerId:u,timerType:"timeout"}})},setInterval:(u,o)=>{let c=(0,Y.generateUniqueNumber)(e);return e.set(c,()=>{u(),typeof e.get(c)=="function"&&m.postMessage({id:null,method:"set",params:{delay:o,now:performance.now(),timerId:c,timerType:"interval"}})}),m.postMessage({id:null,method:"set",params:{delay:o,now:performance.now(),timerId:c,timerType:"interval"}}),c},setTimeout:(u,o)=>{let c=(0,Y.generateUniqueNumber)(n);return n.set(c,u),m.postMessage({id:null,method:"set",params:{delay:o,now:performance.now(),timerId:c,timerType:"timeout"}}),c}}};var K=null,Fe=(t,e)=>()=>{if(K!==null)return K;let n=new Blob([e],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(n);return K=t(r),K.setTimeout(()=>URL.revokeObjectURL(r),0),K};var Be=`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`;var ue=Fe(Ue,Be),We=t=>ue().clearInterval(t),He=t=>ue().clearTimeout(t),Ge=(t,e)=>ue().setInterval(t,e),qe=(t,e)=>ue().setTimeout(t,e);var E=(typeof window=="undefined"?"undefined":typeof window)=="object";var b={setTimeout:E?setTimeout.bind(window):setTimeout,clearTimeout:E?clearTimeout.bind(window):clearTimeout,setInterval:E?setInterval.bind(window):setInterval,clearInterval:E?clearInterval.bind(window):clearInterval},Ve={setTimeout:qe,clearTimeout:He,setInterval:Ge,clearInterval:We};function je(){b.setTimeout=setTimeout,b.clearTimeout=clearTimeout,b.setInterval=setInterval,b.clearInterval=clearInterval}function Je(t){b.setTimeout=t.setTimeout,b.clearTimeout=t.clearTimeout,b.setInterval=t.setInterval,b.clearInterval=t.clearInterval}var q={},ze=class{constructor(e){this.closed=!1;this.mc=new MessageChannel;this.name=e,q[e]=q[e]||[],q[e].push(this),this.mc.port1.start(),this.mc.port2.start(),this.onStorage=this.onStorage.bind(this),window.addEventListener("storage",this.onStorage)}onStorage(e){if(e.storageArea!==window.localStorage||e.key.substring(0,this.name.length)!==this.name||e.newValue===null)return;let n=JSON.parse(e.newValue);this.mc.port2.postMessage(n)}postMessage(e){if(this.closed)throw new Error("InvalidStateError");let n=JSON.stringify(e),r=`${this.name}:${String(Date.now())}${String(Math.random())}`;window.localStorage.setItem(r,n),b.setTimeout(()=>{window.localStorage.removeItem(r)},500),q[this.name].forEach(m=>{m!==this&&m.mc.port2.postMessage(JSON.parse(n))})}close(){if(this.closed)return;this.closed=!0,this.mc.port1.close(),this.mc.port2.close(),window.removeEventListener("storage",this.onStorage);let e=q[this.name].indexOf(this);q[this.name].splice(e,1)}get onmessage(){return this.mc.port1.onmessage}set onmessage(e){this.mc.port1.onmessage=e}get onmessageerror(){return this.mc.port1.onmessageerror}set onmessageerror(e){this.mc.port1.onmessageerror=e}addEventListener(e,n){return this.mc.port1.addEventListener(e,n)}removeEventListener(e,n){return this.mc.port1.removeEventListener(e,n)}dispatchEvent(e){return this.mc.port1.dispatchEvent(e)}},Xe=typeof window=="undefined"?void 0:typeof window.BroadcastChannel=="function"?window.BroadcastChannel:ze;var h=()=>E?performance.now():Date.now();function $e(){return h().toString(36).substring(2)}var d;(function(o){o[o.REGISTER=0]="REGISTER",o[o.DEREGISTER=1]="DEREGISTER",o[o.IDLE=2]="IDLE",o[o.ACTIVE=3]="ACTIVE",o[o.PROMPT=4]="PROMPT",o[o.START=5]="START",o[o.RESET=6]="RESET",o[o.PAUSE=7]="PAUSE",o[o.RESUME=8]="RESUME",o[o.MESSAGE=9]="MESSAGE"})(d||(d={}));var S;(function(r){r[r.PROMPTED=0]="PROMPTED",r[r.ACTIVE=1]="ACTIVE",r[r.IDLE=2]="IDLE"})(S||(S={}));var he=class{constructor(e){this.token=$e();this.registry=new Map;this.allIdle=!1;let{channelName:n}=e;this.options=e,this.channel=new Xe(n),this.registry.set(this.token,1),this.channel.addEventListener("message",r=>{let{action:m,token:T,data:F}=r.data;switch(m){case 0:this.registry.set(T,1);break;case 1:this.registry.delete(T);break;case 2:this.idle(T);break;case 3:this.active(T);break;case 4:this.prompt(T);break;case 9:this.options.onMessage(F);break;case 5:this.options.start(!0);break;case 6:this.options.reset(!0);break;case 7:this.options.pause(!0);break;case 8:this.options.resume(!0);break}}),this.send(0)}prompt(e=this.token){this.registry.set(e,0);let n=[...this.registry.values()].every(r=>r===0);e===this.token&&this.send(4),n&&this.options.onPrompt()}idle(e=this.token){this.registry.set(e,2);let n=[...this.registry.values()].every(r=>r===2);e===this.token&&this.send(2),!this.allIdle&&n&&(this.allIdle=!0,this.options.onIdle())}active(e=this.token){this.registry.set(e,1);let n=[...this.registry.values()].some(r=>r===1);e===this.token&&this.send(3),this.allIdle&&n&&(this.allIdle=!1,this.options.onActive())}sync(){try{this.channel.postMessage({action:6,token:this.token})}catch{}}message(e){try{this.channel.postMessage({action:9,token:this.token,data:e})}catch{}}send(e){try{this.channel.postMessage({action:e,token:this.token})}catch{}}close(){this.send(1),this.channel.close()}};var Ye=E?document:null,Ke=["mousemove","keydown","wheel","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange"];var ce=se(require("react"));function C(t){let e=(0,ce.useRef)(t);return(0,ce.useEffect)(()=>{e.current=t},[t]),e}function Qe(t,e){let n;function r(...m){n&&clearTimeout(n),n=setTimeout(()=>{t(...m),n=null},e)}return r.cancel=function(){clearTimeout(n)},r}function le(t,e){let n=0;return function(...r){let m=new Date().getTime();if(!(m-n<e))return n=m,t(...r)}}function G({timeout:t=1e3*60*20,promptTimeout:e=0,element:n=Ye,events:r=Ke,timers:m=void 0,immediateEvents:T=[],onPrompt:F=()=>{},onIdle:j=()=>{},onActive:Z=()=>{},onAction:u=()=>{},onMessage:o=()=>{},debounce:c=0,throttle:l=0,eventsThrottle:f=200,startOnMount:p=!0,startManually:M=!1,stopOnIdle:y=!1,crossTab:B=!1,syncTimers:J=0}={}){let z=(0,i.useRef)(h()),Ie=(0,i.useRef)(Date.now()),me=(0,i.useRef)(h()),L=(0,i.useRef)(null),A=(0,i.useRef)(null),X=(0,i.useRef)(0),v=(0,i.useRef)(!0),k=(0,i.useRef)(!1),N=(0,i.useRef)(!0),$=(0,i.useRef)(!1),I=(0,i.useRef)(!1),g=(0,i.useRef)(0),R=(0,i.useRef)(0),O=(0,i.useRef)(null),a=(0,i.useRef)(null),D=C(t),ee=C(e),rt=C(y),Ee=(0,i.useRef)(T),de=(0,i.useRef)(n),pe=(0,i.useRef)([...new Set([...r,...T]).values()]),be=C(j),te=C(Z),ge=C(F),re=C(o),w=(0,i.useRef)();(0,i.useEffect)(()=>{w.current&&w.current.cancel&&w.current.cancel(),c>0?w.current=Qe(u,c):l>0?w.current=le(u,l):w.current=u},[u,l,c]);let ye=(0,i.useRef)();(0,i.useEffect)(()=>{B&&J&&(ye.current=le(()=>{a.current.sync()},J))},[B,J]);let P=()=>{O.current!==null&&(b.clearTimeout(O.current),O.current=null)},W=(s,x=!0)=>{P(),O.current=b.setTimeout(fe,s||D.current),x&&(A.current=h())},we=s=>{g.current=0,R.current=h(),I.current=!0,W(ee.current,!1),ge.current(s)},xe=()=>{v.current=!0,L.current=h(),rt.current?(P(),U()):I.current&&(R.current=0,I.current=!1),be.current()},Me=s=>{I.current=!1,R.current=0,v.current=!1,X.current+=h()-L.current,_(),W(),te.current(s)},fe=s=>{if(!v.current){if(ee.current>0&&!I.current){a.current?a.current.prompt():we(s);return}a.current?a.current.idle():xe();return}a.current?a.current.active():Me(s)},Se=s=>{if(w.current(s),I.current)return;B&&J&&ye.current(),P();let x=h()-A.current;if((v.current&&!y||!v.current&&x>D.current)&&fe(s),k.current=!1,g.current=0,R.current=0,!v.current&&Ee.current.includes(s.type)){fe(s);return}W(),a.current&&a.current.active()},ne=(0,i.useRef)();(0,i.useEffect)(()=>{let s=$.current;s&&U(),f>0?ne.current=le(Se,f):ne.current=Se,s&&_()},[f,B,J]);let _=()=>{!E||$.current||(pe.current.forEach(s=>{de.current.addEventListener(s,ne.current,{capture:!0,passive:!0})}),$.current=!0)},U=(s=!1)=>{!E||($.current||s)&&(pe.current.forEach(x=>{de.current.removeEventListener(x,ne.current,{capture:!0})}),$.current=!1)},H=(0,i.useCallback)(s=>{P(),_(),I.current&&te.current(),v.current=!1,I.current=!1,k.current=!1,g.current=0,R.current=0,a.current&&!s&&(a.current.active(),a.current.send(d.START)),W()},[O,v,D,a]),oe=(0,i.useCallback)(s=>{P(),_(),(v.current||I.current)&&(te.current(),a.current&&a.current.active()),v.current=!1,I.current=!1,k.current=!1,g.current=0,R.current=0,me.current=h(),a.current&&(a.current.allIdle=!1,s||a.current.send(d.RESET)),W()},[O,v,D,a]),Te=(0,i.useCallback)((s=!1)=>k.current?!1:(g.current=ke(),k.current=!0,U(),P(),a.current&&(s||a.current.send(d.PAUSE)),!0),[O,a]),ve=(0,i.useCallback)((s=!1)=>k.current?(k.current=!1,I.current||_(),v.current||W(g.current),R.current&&(R.current=h()),a.current&&(s||a.current.send(d.RESUME)),!0):!1,[O,D,g,a]),nt=(0,i.useCallback)((s,x)=>{a.current?(x&&re.current(s),a.current.message(s)):x&&re.current(s)},[o]),ot=(0,i.useCallback)(()=>v.current,[v]),it=(0,i.useCallback)(()=>I.current,[I]),ke=(0,i.useCallback)(()=>{if(k.current)return g.current;let s=g.current?g.current:I.current?ee.current:D.current,x=A.current?I.current?h()-R.current:h()-A.current:0,Le=Math.ceil(s-x);return Le<0?0:Math.abs(Le)},[D,ee,I,g,A]),st=(0,i.useCallback)(()=>Math.round(h()-me.current),[me]),Re=(0,i.useCallback)(()=>Math.round(h()-z.current),[z]),at=(0,i.useCallback)(()=>L.current?new Date(Ie.current-z.current+L.current):null,[L]),ut=(0,i.useCallback)(()=>A.current?new Date(Ie.current-z.current+A.current):null,[A]),Pe=(0,i.useCallback)(()=>v.current?Math.round(h()-L.current+X.current):Math.round(X.current),[L,X]),ct=(0,i.useCallback)(()=>{let s=Math.round(Re()-Pe());return s>=0?s:0},[z,L,X]);return(0,i.useEffect)(()=>{if(c>0&&l>0)throw new Error("\u274C onAction can either be throttled or debounced, not both.");m&&Je(m);let s=()=>{a.current&&a.current.close(),w.current.cancel&&w.current.cancel(),P(),U(!0)};return E&&window.addEventListener("beforeunload",s),()=>{E&&window.removeEventListener("beforeunload",s),a.current&&a.current.close(),w.current.cancel&&w.current.cancel(),P(),U(!0)}},[]),(0,i.useEffect)(()=>{a.current&&a.current.close(),B?a.current=new he({channelName:"idle-timer",onPrompt:()=>{we()},onIdle:()=>{xe()},onActive:()=>{Me()},onMessage:re.current,start:H,reset:oe,pause:Te,resume:ve}):a.current=null},[B,ge,be,te,re,H,oe,Te,ve]),(0,i.useEffect)(()=>{P(),U(!0),N.current||(k.current=!0,v.current=!0,g.current=0),!M&&(p?H():_())},[M,p,N]),(0,i.useEffect)(()=>{if(!N.current){let s=[...new Set([...r,...T]).values()];if(U(),pe.current=s,de.current=n,Ee.current=T,M)return;p?H():_()}},[n,JSON.stringify(r),JSON.stringify(T),N,M,p]),(0,i.useEffect)(()=>{if(N.current)N.current=!1;else{if(D.current=t,M)return;v.current?oe():H()}},[t,M,N,v]),{message:nt,start:H,reset:oe,pause:Te,resume:ve,isIdle:ot,isPrompted:it,getRemainingTime:ke,getElapsedTime:st,getTotalElapsedTime:Re,getLastIdleTime:at,getLastActiveTime:ut,getTotalIdleTime:Pe,getTotalActiveTime:ct}}var V=se(require("react"));var Q=(0,V.createContext)(null);function Ze(t){let e=G(t);return V.default.createElement(Q.Provider,{value:e},t.children)}var et=Q.Consumer;function tt(){return(0,V.useContext)(Q)}
